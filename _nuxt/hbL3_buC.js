import{_ as g}from"./CZndvQaX.js";import{d as h,y as w,ac as d,V as C,I as b,R as v,i as D,U as i}from"./rfvmtTOo.js";import{u as L}from"./DarSl5Zp.js";import{q}from"./BM4FrW0M.js";import"./BUJdxr6w.js";import"./Da7xgCDH.js";import"./BbJXGFQy.js";function x(){return L("board",()=>{const r=q("directory");return r.select("featured","card_image","description","title","path","tags"),r.order("featured","DESC").all()})}const P=h({__name:"DirectoryGrid",async setup(f){let r,a;const n=w().directory.grid,c=d("search"),u=d("tags"),{data:_}=([r,a]=C(()=>x()),r=await r,a(),r),y=b(()=>{let t=_.value;return t?(c.value&&(t=t==null?void 0:t.filter(o=>{var s,e;return(((s=o.title)==null?void 0:s.toLowerCase())+((e=o.description)==null?void 0:e.toLowerCase())).includes(c.value.toLowerCase())})),u.value.length>0&&(t=t==null?void 0:t.filter(o=>u.value.every(s=>{var e;return(e=o.tags)==null?void 0:e.includes(s)}))),t):[]});return(t,o)=>{var e,m,l,p;const s=g;return D(),v(s,{listings:i(y)??[],"show-submit":(m=(e=i(n))==null?void 0:e.submit)==null?void 0:m.show,"submit-first":(p=(l=i(n))==null?void 0:l.submit)==null?void 0:p.first},null,8,["listings","show-submit","submit-first"])}}});export{P as default};
